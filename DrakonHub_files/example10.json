{"name":"Logon with Facebook - Authorization Code","type":"drakon","version":20180619,"nodes":{"1":{"id":"1","type":"beginend","isLine":false,"x":420,"y":280,"w":170,"h":40,"content":{"txt2":"","txt":"Logon with Facebook - Authorization Code","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000","font":"bold 22px 'Liberation Sans'"},"role":"header"},"267":{"id":"267","type":"junction","isLine":false,"x":250,"y":340,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"268":{"id":"268","type":"junction","isLine":false,"x":420,"y":340,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"269":{"id":"269","type":"junction","isLine":false,"x":770,"y":340,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"270":{"id":"270","type":"junction","isLine":false,"x":1670,"y":340,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"271":{"id":"271","type":"branch","isLine":false,"x":420,"y":405,"w":140,"h":45,"content":{"txt2":"","txt":"On App's website","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000","font":"18px 'Liberation Sans'"}},"272":{"id":"272","type":"branch","isLine":false,"x":770,"y":405,"w":140,"h":45,"content":{"txt2":"","txt":"In Facebook","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000","font":"18px 'Liberation Sans'"}},"273":{"id":"273","type":"branch","isLine":false,"x":1670,"y":405,"w":60,"h":45,"content":{"txt2":"","txt":"Exit","fillColor":"#b0e0e6","textColor":"#000000","lineColor":"#000000","font":"18px 'Liberation Sans'"}},"274":{"id":"274","type":"address","isLine":false,"x":420,"y":1250,"w":140,"h":30,"content":{"txt2":"","txt":"In Facebook","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"}},"275":{"id":"275","type":"address","isLine":false,"x":770,"y":1250,"w":140,"h":30,"content":{"txt2":"","txt":"On App's website, after authorization","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"}},"276":{"id":"276","type":"junction","isLine":false,"x":250,"y":1300,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"277":{"id":"277","type":"junction","isLine":false,"x":420,"y":1300,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"278":{"id":"278","type":"junction","isLine":false,"x":770,"y":1300,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"279":{"id":"279","type":"end","isLine":false,"x":1670,"y":490,"w":40,"h":20,"content":{"txt2":"","txt":"End","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"}},"304":{"id":"304","type":"question","isLine":false,"x":770,"y":490,"w":140,"h":20,"content":{"txt2":"","txt":"Is Client authenticated in Facebook?","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"},"flag1":1},"305":{"id":"305","type":"junction","isLine":false,"x":1060,"y":490,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"307":{"id":"307","type":"question","isLine":false,"x":1060,"y":770,"w":110,"h":20,"content":{"txt2":"","txt":"Authentication successful?","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"},"flag1":1},"308":{"id":"308","type":"junction","isLine":false,"x":1210,"y":770,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"311":{"id":"311","type":"question","isLine":false,"x":770,"y":860,"w":140,"h":30,"content":{"txt2":"","txt":"Has user granted access to user data before?","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"},"flag1":1},"312":{"id":"312","type":"junction","isLine":false,"x":1060,"y":860,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"313":{"id":"313","type":"junction","isLine":false,"x":1060,"y":1060,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"314":{"id":"314","type":"junction","isLine":false,"x":770,"y":1060,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"316":{"id":"316","type":"question","isLine":false,"x":1060,"y":1020,"w":110,"h":20,"content":{"txt2":"","txt":"User gives confirmation?","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"},"flag1":1},"317":{"id":"317","type":"junction","isLine":false,"x":770,"y":810,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"318":{"id":"318","type":"junction","isLine":false,"x":1060,"y":810,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"319":{"id":"319","type":"junction","isLine":false,"x":1210,"y":1020,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"345":{"id":"345","type":"branch","isLine":false,"x":1450,"y":405,"w":110,"h":45,"content":{"txt2":"","txt":"On App's website, after authorization","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000","font":"18px 'Liberation Sans'"}},"346":{"id":"346","type":"junction","isLine":false,"x":1450,"y":340,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"347":{"id":"347","type":"junction","isLine":false,"x":1450,"y":1300,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"348":{"id":"348","type":"address","isLine":false,"x":1450,"y":1250,"w":110,"h":30,"content":{"txt2":"","txt":"Exit","fillColor":"#b0e0e6","textColor":"#000000","lineColor":"#000000"}},"356":{"id":"356","type":"action","isLine":false,"x":1450,"y":1020,"w":110,"h":20,"content":{"txt2":"","txt":"Logon succeeded","fillColor":"#008000","textColor":"#ffffff","lineColor":"#000000","lineThickness":0}},"357":{"id":"357","type":"junction","isLine":false,"x":1450,"y":1170,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"358":{"id":"358","type":"junction","isLine":false,"x":1640,"y":1170,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"362":{"id":"362","type":"question","isLine":false,"x":1450,"y":850,"w":110,"h":20,"content":{"txt2":"","txt":"Check successful?","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"},"flag1":1},"363":{"id":"363","type":"junction","isLine":false,"x":1640,"y":850,"w":0,"h":0,"content":{"txt2":"","lineColor":"#000000","txt":"","textColor":"#000000"}},"379":{"id":"379","type":"address","isLine":false,"x":1210,"y":1250,"w":60,"h":30,"content":{"txt2":"","txt":"Exit","fillColor":"#b0e0e6","textColor":"#000000","lineColor":"#000000"}},"380":{"id":"380","type":"junction","isLine":false,"x":1210,"y":1300,"w":0,"h":0,"content":{"txt2":"","textColor":"#000000","txt":"","lineColor":"#000000"}},"385":{"id":"385","type":"action","isLine":false,"x":1210,"y":1080,"w":60,"h":20,"content":{"txt2":"","txt":"Logon failed","fillColor":"#800000","textColor":"#ffffff","lineColor":"#000000","lineThickness":0}},"391":{"id":"391","type":"shelf","isLine":false,"x":420,"y":510,"w":140,"h":40,"a":20,"content":{"txt2":"User > Browser","txt":"Press \"Logon with Facebook\" button","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"}},"395":{"id":"395","type":"shelf","isLine":false,"x":420,"y":610,"w":140,"h":40,"a":20,"content":{"txt2":"Browser > App server","txt":"Send request \"Logon with Facebook\"","fillColor":"#fff68f","textColor":"#000000","lineColor":"#000000"}},"398":{"id":"398","type":"shelf","isLine":false,"x":420,"y":730,"w":140,"h":60,"a":20,"content":{"txt2":"App server > Browser","txt":"Redirect to \"Authorization endpoint\" (logon page) in Facebook\nAlso send:\n- client ID","fillColor":"#d3ffce","textColor":"#000000","lineColor":"#000000"}},"401":{"id":"401","type":"shelf","isLine":false,"x":420,"y":850,"w":140,"h":40,"a":20,"content":{"txt2":"Browser > Facebook","txt":"Access the redirected URL","fillColor":"#fff68f","textColor":"#000000","lineColor":"#000000"}},"405":{"id":"405","type":"shelf","isLine":false,"x":1060,"y":670,"w":110,"h":60,"a":20,"content":{"txt2":"Browser > Facebook","txt":"Authenticate:\n- user/email\n- password","fillColor":"#fff68f","textColor":"#000000","lineColor":"#000000"}},"408":{"id":"408","type":"shelf","isLine":false,"x":1060,"y":550,"w":110,"h":40,"a":20,"content":{"txt2":"Facebook > Browser","txt":"Show logon page","fillColor":"#ffffff","textColor":"#4169e1","lineColor":"#4169e1","lineThickness":2}},"412":{"id":"412","type":"shelf","isLine":false,"x":1060,"y":930,"w":110,"h":50,"a":20,"content":{"txt2":"Facebook > Browser","txt":"Require confirmation to access user data","fillColor":"#ffffff","textColor":"#4169e1","lineColor":"#4169e1","lineThickness":2}},"416":{"id":"416","type":"shelf","isLine":false,"x":770,"y":1140,"w":140,"h":60,"a":20,"content":{"txt2":"Facebook > Browser","txt":"Redirect to \"Redirect endpoint\" on App server (the redirect URL provided by App). Send also:\n- authorization code","fillColor":"#ffffff","textColor":"#4169e1","lineColor":"#4169e1","lineThickness":2}},"420":{"id":"420","type":"shelf","isLine":false,"x":1450,"y":510,"w":110,"h":40,"a":20,"content":{"txt2":"Browser > App server","txt":"Access redirect URL","fillColor":"#fff68f","textColor":"#000000","lineColor":"#000000"}},"424":{"id":"424","type":"shelf","isLine":false,"x":1450,"y":630,"w":110,"h":60,"a":20,"content":{"txt2":"App server > Facebook","txt":"Send to \"Token endpoint\"\n- authorization code\n- client ID\n- client secret","fillColor":"#d3ffce","textColor":"#000000","lineColor":"#000000"}},"428":{"id":"428","type":"shelf","isLine":false,"x":1450,"y":750,"w":110,"h":40,"a":20,"content":{"txt2":"Facebook","txt":"Check received credentials","fillColor":"#ffffff","textColor":"#4169e1","lineColor":"#4169e1","lineThickness":2}},"432":{"id":"432","type":"shelf","isLine":false,"x":1450,"y":940,"w":110,"h":40,"a":20,"content":{"txt2":"Facebook > App","txt":"Return access token","fillColor":"#ffffff","textColor":"#4169e1","lineColor":"#4169e1","lineThickness":2}},"440":{"id":"440","type":"comment","isLine":false,"x":1450,"y":1105,"w":110,"h":45,"content":{"txt2":"","txt":"Now App server can access user-related data on Facebook","fillColor":"#ffffff","textColor":"#000000","lineColor":"#000000"}},"447":{"id":"447","type":"action","isLine":false,"x":1640,"y":1020,"w":60,"h":20,"content":{"txt2":"","txt":"Logon failed","fillColor":"#800000","textColor":"#ffffff","lineColor":"#000000","lineThickness":0}}},"edges":{"280":{"id":"280","type":"vertical","isLine":true,"isVertical":true,"head":"1","tail":"268"},"281":{"id":"281","type":"horizontal","isLine":true,"isVertical":false,"head":"267","tail":"268","role":"rarrow"},"282":{"id":"282","type":"horizontal","isLine":true,"isVertical":false,"head":"268","tail":"269"},"284":{"id":"284","type":"vertical","isLine":true,"isVertical":true,"head":"268","tail":"271"},"285":{"id":"285","type":"vertical","isLine":true,"isVertical":true,"head":"269","tail":"272"},"286":{"id":"286","type":"vertical","isLine":true,"isVertical":true,"head":"270","tail":"273"},"287":{"id":"287","type":"horizontal","isLine":true,"isVertical":false,"head":"276","tail":"277"},"288":{"id":"288","type":"horizontal","isLine":true,"isVertical":false,"head":"277","tail":"278","role":"sil_floor"},"289":{"id":"289","type":"vertical","isLine":true,"isVertical":true,"head":"267","tail":"276"},"290":{"id":"290","type":"vertical","isLine":true,"isVertical":true,"head":"274","tail":"277"},"291":{"id":"291","type":"vertical","isLine":true,"isVertical":true,"head":"275","tail":"278"},"295":{"id":"295","type":"vertical","isLine":true,"isVertical":true,"head":"273","tail":"279","role":"down"},"322":{"id":"322","type":"horizontal","isLine":true,"isVertical":false,"head":"304","tail":"305"},"323":{"id":"323","type":"horizontal","isLine":true,"isVertical":false,"head":"307","tail":"308"},"327":{"id":"327","type":"horizontal","isLine":true,"isVertical":false,"head":"311","tail":"312"},"328":{"id":"328","type":"horizontal","isLine":true,"isVertical":false,"head":"314","tail":"313","role":"left"},"329":{"id":"329","type":"vertical","isLine":true,"isVertical":true,"head":"311","tail":"314","role":"down"},"332":{"id":"332","type":"vertical","isLine":true,"isVertical":true,"head":"304","tail":"317","role":"down"},"333":{"id":"333","type":"vertical","isLine":true,"isVertical":true,"head":"317","tail":"311","role":"down"},"334":{"id":"334","type":"vertical","isLine":true,"isVertical":true,"head":"307","tail":"318","role":"down"},"335":{"id":"335","type":"horizontal","isLine":true,"isVertical":false,"head":"317","tail":"318","role":"left"},"336":{"id":"336","type":"vertical","isLine":true,"isVertical":true,"head":"316","tail":"313","role":"down"},"337":{"id":"337","type":"vertical","isLine":true,"isVertical":true,"head":"308","tail":"319","role":"down"},"338":{"id":"338","type":"horizontal","isLine":true,"isVertical":false,"head":"316","tail":"319"},"343":{"id":"343","type":"vertical","isLine":true,"isVertical":true,"head":"272","tail":"304","role":"down"},"349":{"id":"349","type":"vertical","isLine":true,"isVertical":true,"head":"346","tail":"345"},"351":{"id":"351","type":"vertical","isLine":true,"isVertical":true,"head":"348","tail":"347"},"352":{"id":"352","type":"horizontal","isLine":true,"isVertical":false,"head":"269","tail":"346"},"354":{"id":"354","type":"horizontal","isLine":true,"isVertical":false,"head":"346","tail":"270"},"366":{"id":"366","type":"horizontal","isLine":true,"isVertical":false,"head":"357","tail":"358","role":"left"},"370":{"id":"370","type":"horizontal","isLine":true,"isVertical":false,"head":"362","tail":"363"},"382":{"id":"382","type":"vertical","isLine":true,"isVertical":true,"head":"379","tail":"380"},"383":{"id":"383","type":"horizontal","isLine":true,"isVertical":false,"head":"278","tail":"380","role":"sil_floor"},"384":{"id":"384","type":"horizontal","isLine":true,"isVertical":false,"head":"380","tail":"347","role":"sil_floor"},"386":{"id":"386","type":"vertical","isLine":true,"isVertical":true,"head":"319","tail":"385","role":"down"},"387":{"id":"387","type":"vertical","isLine":true,"isVertical":true,"head":"385","tail":"379","role":"down"},"392":{"id":"392","type":"vertical","isLine":true,"isVertical":true,"head":"271","tail":"391","role":"down"},"396":{"id":"396","type":"vertical","isLine":true,"isVertical":true,"head":"391","tail":"395","role":"down"},"399":{"id":"399","type":"vertical","isLine":true,"isVertical":true,"head":"395","tail":"398","role":"down"},"402":{"id":"402","type":"vertical","isLine":true,"isVertical":true,"head":"398","tail":"401","role":"down"},"404":{"id":"404","type":"vertical","isLine":true,"isVertical":true,"head":"401","tail":"274","role":"down"},"409":{"id":"409","type":"vertical","isLine":true,"isVertical":true,"head":"305","tail":"408","role":"down"},"410":{"id":"410","type":"vertical","isLine":true,"isVertical":true,"head":"408","tail":"405","role":"down"},"411":{"id":"411","type":"vertical","isLine":true,"isVertical":true,"head":"405","tail":"307","role":"down"},"413":{"id":"413","type":"vertical","isLine":true,"isVertical":true,"head":"312","tail":"412","role":"down"},"415":{"id":"415","type":"vertical","isLine":true,"isVertical":true,"head":"412","tail":"316","role":"down"},"417":{"id":"417","type":"vertical","isLine":true,"isVertical":true,"head":"314","tail":"416","role":"down"},"419":{"id":"419","type":"vertical","isLine":true,"isVertical":true,"head":"416","tail":"275","role":"down"},"421":{"id":"421","type":"vertical","isLine":true,"isVertical":true,"head":"345","tail":"420","role":"down"},"429":{"id":"429","type":"vertical","isLine":true,"isVertical":true,"head":"424","tail":"428","role":"down"},"431":{"id":"431","type":"vertical","isLine":true,"isVertical":true,"head":"428","tail":"362","role":"down"},"433":{"id":"433","type":"vertical","isLine":true,"isVertical":true,"head":"362","tail":"432","role":"down"},"435":{"id":"435","type":"vertical","isLine":true,"isVertical":true,"head":"432","tail":"356","role":"down"},"439":{"id":"439","type":"vertical","isLine":true,"isVertical":true,"head":"357","tail":"348","role":"down"},"441":{"id":"441","type":"vertical","isLine":true,"isVertical":true,"head":"356","tail":"440","role":"down"},"442":{"id":"442","type":"vertical","isLine":true,"isVertical":true,"head":"440","tail":"357","role":"down"},"446":{"id":"446","type":"vertical","isLine":true,"isVertical":true,"head":"420","tail":"424","role":"down"},"449":{"id":"449","type":"vertical","isLine":true,"isVertical":true,"head":"447","tail":"358","role":"down"},"450":{"id":"450","type":"vertical","isLine":true,"isVertical":true,"head":"363","tail":"447","role":"down"}},"background":"","diaLine":"","diaLineThickness":"","font":"14px 'Liberation Sans'"}
