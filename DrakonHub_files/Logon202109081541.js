function Logon(d,e,f,q){function h(a){var b=e.getElementById(k);b.innerHTML="";a&&(a=e.createTextNode(a),b.appendChild(a))}function g(a,b){h(b);if(c.onError)c.onError();a&&e.getElementById(a).focus()}function p(a,b,e){c.stopped=!1;a=a.toLowerCase();m=!0;h(f("MES_WORKING"));HtmlUtils.sendPost("/api/logon",{user:a,password:b},function(a){c.stopped||(HtmlUtils.setValue(l,""),h(f("MES_SUCCESS")),d.carrotquest&&d.carrotquest.track("$authorized",{$email:a.email,$name:a.name,$user_id:a.id}),e(a))},function(a){c.stopped||
(m=!1,h(""),a.error?g(null,f(a.error)):"string"==typeof a?g(null,a):g(null,f("ERR_ERROR")))})}var c=this,m=c.stopped=!1,k,n=null,l=null;k=null;this.logon=function(a,b,c,d){n=a;l=b;k=c;m||(k=c,a=(e.getElementById(n).value||"").trim().toLowerCase(),b=e.getElementById(l).value||"",a?b?p(a,b,d):g(l,f("ERR_PASSWORD_EMPTY")):g(n,f("ERR_USER_NAME_EMPTY")))};this.logout=function(){function a(){d.location.href="/"}d.localStorage.removeItem("clipboard");d.localStorage.removeItem("clipboard type");HtmlUtils.sendPost("/api/logout",
{},a,a)}};
