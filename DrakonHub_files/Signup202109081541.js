function Signup(t,h,u,k,e,q,v,l,w,D,E,x){function y(a,b,f,c,d,e){f?(a={name:a,email:b,password:f,lump:c,src:d},b="/api/create_user"):(a={name:a,email:b,src:d},b="/api/create_user_email");e&&(a.product=e);HtmlUtils.sendPost(b,a,F,G)}function n(a){return HtmlUtils.getValue(a+"_edit")}function g(a){var b=a+"_error",f=a+"_ptr";HtmlUtils.show(b,"none");HtmlUtils.show(f,"none");HtmlUtils.setText(b,"");if(a=h.getElementById(a+"_edit"))a.style.border=""}function z(){g(k);g(e);g(q);g(v);HtmlUtils.setText(l,
"");r()}function A(){c.widget?c.captchaShown||(c.captchaShown=!0,HtmlUtils.clear("captcha"),c.widget.render("captcha",{sitekey:"6LcMXBATAAAAANlJGQ1jRdMuW4wM_Tb5XJaHLIc_",callback:H})):c.onLoad=A}function d(a,b){var f=a+"_error",c=a+"_ptr";HtmlUtils.show(f,"block");HtmlUtils.show(c,"block");b=u(b);HtmlUtils.setText(f,b);f=h.getElementById(a+"_edit");f.style.border="solid 1px red";f.style.borderRight="solid 5px red";r()}function B(a,b){a=u(a);HtmlUtils.setText(l,a);HtmlUtils.show(l,"block");b&&c.widget&&
(c.widget.reset(),c.lump=null);r()}function G(a){p=!1;E(a);a=a.error?a.error:"ERR_CREATE_ACCOUNT_FAIL";"ERR_USER_EMAIL_NOT_UNIQUE"===a?d(e,a):"ERR_USER_ID_NOT_UNIQUE"===a?d(k,a):B(a,!1)}function F(a){p=!1;t.carrotquest&&t.carrotquest.track("$registered",{$email:a.email,$name:a.name,$user_id:a.id});D(a)}function r(){C.update&&C.update()}function H(a){c.lump=a}var c={},p=!1,C=this;(function(){if(x){var a;a="ru"==gLanguage.toLowerCase().substring(0,2)?"ru":"en";var b=h.createElement("script");b.src=
"https://www.google.com/recaptcha/api.js?onload=onCaptureLoadCallback&render=explicit&hl="+a;h.body.appendChild(b)}})();this.signup=function(a){if(Config.EMAIL_SIGNUP){if(!p){z();var b=n(k).trim(),c=n(e).trim(),m=Utils.checkSpaceName(b);m?d(k,m):c?Utils.checkEmail(c)?(w(),p=!0,y(b,c,null,"no-captcha",a,"team")):d(e,"ERR_BAD_EMAIL"):d(e,"ERR_EMAIL_EMPTY")}}else if(!p)if(z(),b="no-captcha",x&&(b=grecaptcha.getResponse()),b){var c=n(k).trim(),m=n(e).trim(),h=n(q),g=n(v),g=Utils.checkPassword(h,g),l=
Utils.checkSpaceName(c);l?d(k,l):m?Utils.checkEmail(m)?g?d(q,g):(w(),p=!0,y(c,m,h,b,a)):d(e,"ERR_BAD_EMAIL"):d(e,"ERR_EMAIL_EMPTY")}else B("ERR_PROVE_NOT_ROBOT",!1)};this.onCaptureLoadCallback=function(a){c.widget=a;c.onLoad&&(a=c.onLoad,c.onLoad=null,a())};this.showCaptcha=A};
